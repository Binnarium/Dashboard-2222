<dashboard-sidebar-layout>
  <!-- main sidebar container -->
  <dashboard-main-sidebar></dashboard-main-sidebar>

  <!-- cities container -->
  <dashboard-cities-sidebar></dashboard-cities-sidebar>

  <!-- main content of page -->
  <div class="w-full p-8 flex flex-col">

    <!-- header -->
    <div class="flex flex-row justify-between mb-6">
      <!-- page title -->
      <h1 class="text-gray-800 text-xl font-bold">
        Configurar Introducci칩n
      </h1>

      <!-- saved text -->
      <ng-container *ngIf="saved; else savingTemplate">
        <span class="uppercase text-green-500 text-xs font-bold">
          Guardado
        </span>
      </ng-container>

      <ng-template #savingTemplate>
        <span class="uppercase text-gray-400 text-xs font-bold">
          Guardando...
        </span>
      </ng-template>
    </div>


    <!-- form -->
    <form [formGroup]="form">
      <!-- wrapper for content -->
      <div div formArrayName="content">
        <!-- iterate thought all controls -->
        <ng-container *ngFor="let control of historyContent.controls ; let idx = index" [formGroupName]="idx">

          <!-- text form control -->
          <div class="flex flex-wrap" *ngIf="control.value.kind === 'HISTORY#TEXT'">
            <!-- form group -->
            <div class="relative w-full mb-3">
              <!-- label -->
              <label class="block uppercase text-gray-700 text-xs font-bold mb-4">
                Texto
              </label>

              <!-- input text -->
              <textarea formControlName="text" rows="4"
                class="px-4 py-4 placeholder-gray-400 text-gray-700 bg-white rounded text-sm shadow focus:outline-none focus:shadow-outline w-full ease-linear transition-all duration-150"></textarea>
            </div>
          </div>

          <!-- title form control -->
          <div class="flex flex-wrap" *ngIf="control.value.kind === 'HISTORY#TITLE'">
            <!-- form group -->
            <div class="relative w-full mb-3">
              <!-- label -->
              <label class="block uppercase text-gray-700 text-xs font-bold mb-4">
                Titulo
              </label>

              <!-- input text -->
              <input type="text" formControlName="title"
                class="px-4 py-4 placeholder-gray-400 text-gray-700 bg-white rounded text-sm shadow focus:outline-none focus:shadow-outline w-full ease-linear transition-all duration-150">
            </div>
          </div>

          <!-- IMAGE form control -->
          <div class="flex flex-wrap" *ngIf="control.value.kind === 'HISTORY#IMAGE'">
            <!-- form group -->
            <div class="relative w-full mb-3">
              <!-- label -->
              <h3 class="block uppercase text-gray-700 text-xs font-bold mb-4">
                Imagen
              </h3>

              <!-- input text -->
              <dashboard-upload-image [image]="control.value" (completed)="uploadImage($event, idx)">
              </dashboard-upload-image>
            </div>
          </div>
        </ng-container>
      </div>
      <button type="button" (click)="addTitle()">A침adir Titulo</button>
      <button type="button" (click)="addImage()">A침adir Imagen</button>
      <button type="button" (click)="addText()">A침adir Texto</button>
    </form>
  </div>

</dashboard-sidebar-layout>
